import{a as w,F as b,G as S,H as _,I as k,d as E,y,z as v,A as i,J as p,B as P}from"./DrVR--3j.js";const U="$s";function O(...e){const l=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(l);const[n,r]=e;if(!n||typeof n!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+n);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const o=U+n,c=w(),t=b(c.payload.state,o);if(t.value===void 0&&r){const s=r();if(S(s))return c.payload.state[o]=s,s;t.value=s}return t}const f={1:{id:"1",name:"Moni Roy",email:"admin@vireakbuntham.com"}},g={"admin@vireakbuntham.com":"password123"},A=()=>{const e=O("auth.user",()=>{try{const t=localStorage.getItem("authUser");return t?JSON.parse(t):null}catch(t){return console.error("Could not parse user from localStorage",t),null}return null});_(e,t=>{t?localStorage.setItem("authUser",JSON.stringify(t)):localStorage.removeItem("authUser")},{deep:!0});const l=async(t,s)=>new Promise((u,a)=>{setTimeout(()=>{const d=Object.values(f).find(m=>m.email===t);d&&g[t]===s?(e.value=d,u()):a(new Error("Invalid email or password."))},500)}),n=async(t,s,u)=>new Promise((a,d)=>{setTimeout(()=>{if(Object.values(f).some(x=>x.email===s)){d(new Error("An account with this email already exists."));return}const m=Date.now().toString(),h={id:m,name:t,email:s};f[m]=h,g[s]=u,e.value=h,a()},500)}),r=()=>{e.value=null},o=async t=>new Promise((s,u)=>{setTimeout(()=>{if(e.value){const a={...e.value,name:t};f[e.value.id]=a,e.value=a,s()}else u(new Error("User not found."))},500)}),c=async(t,s)=>new Promise((u,a)=>{setTimeout(()=>{e.value&&g[e.value.email]===t?(g[e.value.email]=s,u()):a(new Error("Incorrect current password."))},500)});return{user:k(e),login:l,register:n,logout:r,updateProfile:o,changePassword:c}},I={class:"min-h-screen bg-slate-50 flex items-center justify-center"},R={class:"text-center"},B={class:"space-y-4"},C={key:0,class:"space-x-4"},N={key:1,class:"space-y-2"},T={class:"text-slate-700"},M=E({__name:"index",setup(e){const{user:l,logout:n}=A();return(r,o)=>(v(),y("div",I,[i("div",R,[o[2]||(o[2]=i("h1",{class:"text-4xl font-bold text-slate-800 mb-4"}," Vireak Buntham - Slide Manager ",-1)),o[3]||(o[3]=i("p",{class:"text-slate-600 mb-8"}," Welcome to the new Nuxt 3 version! ",-1)),i("div",B,[p(l)?(v(),y("div",N,[i("p",T,"Welcome back, "+P(p(l).name)+"!",1),i("button",{onClick:o[0]||(o[0]=(...c)=>p(n)&&p(n)(...c)),class:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"}," Logout ")])):(v(),y("div",C,o[1]||(o[1]=[i("button",{class:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors"}," Login ",-1),i("button",{class:"px-6 py-3 border border-orange-500 text-orange-500 rounded-lg hover:bg-orange-50 transition-colors"}," Register ",-1)])))])])]))}});export{M as default};
