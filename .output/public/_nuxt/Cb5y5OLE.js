import{X as L,u as V,_ as ie,a as re,b as de}from"./B0W666fb.js";import{c as _}from"./CrOyNKkQ.js";import{e as M,c,a as e,L as N,M as E,o as d,t as f,O as q,b as m,u as v,D as S,h as k,d as $,r as g,g as z,P as ue,i as T,v as U,Q as ce,K as pe,l as me,N as F,n as ge}from"./BLElfGiT.js";import{u as ve}from"./BEaUzWxy.js";import{u as be}from"./DaMYpevW.js";/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=_("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=_("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=_("CloudUploadIcon",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=_("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=_("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=_("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=_("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=_("TriangleAlertIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Pe={class:"overflow-x-auto"},$e={class:"w-full text-sm text-left text-slate-500"},Se={class:"divide-y divide-slate-200"},Me={class:"px-6 py-4"},Ie=["src","alt"],Ae={class:"px-6 py-4 font-semibold text-slate-900"},De={class:"px-6 py-4"},je={class:"px-6 py-4"},ze={class:"px-6 py-4"},Oe={class:"px-6 py-4"},Te={class:"flex items-center justify-end space-x-2"},Fe=["onClick"],Ne=["onClick"],Be=M({__name:"SlideTable",props:{slides:{},onEdit:{type:Function},onDelete:{type:Function}},setup(C){return(s,i)=>(d(),c("div",Pe,[e("table",$e,[i[0]||(i[0]=e("thead",{class:"text-xs text-slate-500 uppercase bg-slate-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-4 font-semibold tracking-wider"},"Thumbnail"),e("th",{scope:"col",class:"px-6 py-4 font-semibold tracking-wider"},"Title"),e("th",{scope:"col",class:"px-6 py-4 font-semibold tracking-wider"},"Order"),e("th",{scope:"col",class:"px-6 py-4 font-semibold tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-4 font-semibold tracking-wider"},"Last Updated By"),e("th",{scope:"col",class:"px-6 py-4 font-semibold tracking-wider text-right"},"Action")])],-1)),e("tbody",Se,[(d(!0),c(N,null,E(s.slides,n=>(d(),c("tr",{key:n.id,class:"bg-white hover:bg-slate-50/50 transition-colors"},[e("td",Me,[e("img",{src:n.image,alt:n.title,class:"w-28 h-20 object-cover rounded-lg bg-slate-100"},null,8,Ie)]),e("td",Ae,f(n.title),1),e("td",De,f(n.order),1),e("td",je,[e("span",{class:q(["py-1 px-3 text-xs font-semibold rounded-full",n.status==="active"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"])},f(n.status==="active"?"Active":"Inactive"),3)]),e("td",ze,f(n.lastUpdatedBy),1),e("td",Oe,[e("div",Te,[e("button",{onClick:r=>s.onEdit(n),class:"p-2 rounded-full text-slate-500 hover:bg-blue-100 hover:text-blue-600 transition-colors"},[m(v(Ce),{size:18})],8,Fe),e("button",{onClick:r=>s.onDelete(n),class:"p-2 rounded-full text-slate-500 hover:bg-red-100 hover:text-red-600 transition-colors"},[m(v(ke),{size:18})],8,Ne)])])]))),128))])])]))}}),Ue={key:0,class:"flex items-center justify-between bg-white px-4 py-3 sm:px-6 mt-6","aria-label":"Pagination"},Le={class:"hidden sm:block"},Ve={class:"text-sm text-slate-600"},Ee={class:"font-semibold text-slate-800"},qe={class:"font-semibold text-slate-800"},Re={class:"font-semibold text-slate-800"},Ge={class:"flex flex-1 justify-between sm:justify-end gap-2"},He=["disabled"],We=["disabled"],Ye=M({__name:"AppPagination",props:{currentPage:{},totalPages:{},totalItems:{},itemsPerPage:{},onPageChange:{type:Function}},setup(C){const s=C,i=S(()=>s.totalItems>0?(s.currentPage-1)*s.itemsPerPage+1:0),n=S(()=>Math.min(s.currentPage*s.itemsPerPage,s.totalItems));return(r,a)=>r.totalPages>1?(d(),c("nav",Ue,[e("div",Le,[e("p",Ve,[a[2]||(a[2]=$(" Showing ")),e("span",Ee,f(i.value),1),a[3]||(a[3]=$(" to ")),e("span",qe,f(n.value),1),a[4]||(a[4]=$(" of ")),e("span",Re,f(r.totalItems),1),a[5]||(a[5]=$(" results "))])]),e("div",Ge,[e("button",{onClick:a[0]||(a[0]=b=>r.onPageChange(r.currentPage-1)),disabled:r.currentPage===1,class:"relative inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m(v(fe),{size:18,class:"mr-2"}),a[6]||(a[6]=$(" Previous "))],8,He),e("button",{onClick:a[1]||(a[1]=b=>r.onPageChange(r.currentPage+1)),disabled:r.currentPage===r.totalPages,class:"relative inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[a[7]||(a[7]=$(" Next ")),m(v(xe),{size:18,class:"ml-2"})],8,We)])])):k("",!0)}}),Je={class:"mt-1"},Xe=["src"],Ke={key:1,class:"space-y-2 text-center"},Qe={key:0,class:"text-red-500 text-sm mt-2"},Ze=M({__name:"AppImageUploader",props:{image:{},onImageChange:{type:Function}},setup(C){const s=C,i=g(!1),n=g(null),r=o=>{if(o){if(o.size>5*1024*1024){n.value="File size cannot exceed 5MB.";return}if(o.type==="image/jpeg"||o.type==="image/png"){n.value=null;const t=new FileReader;t.onloadend=()=>{s.onImageChange(t.result)},t.readAsDataURL(o)}else n.value="Invalid file type. Please upload a JPG or PNG file."}},a=o=>{var t;o.preventDefault(),o.stopPropagation(),i.value=!1,(t=o.dataTransfer)!=null&&t.files&&o.dataTransfer.files[0]&&r(o.dataTransfer.files[0])},b=o=>{o.preventDefault(),o.stopPropagation(),i.value=!0},x=o=>{o.preventDefault(),o.stopPropagation(),i.value=!1},y=o=>{o.preventDefault(),o.stopPropagation()},w=o=>{const t=o.target,l=t.files?t.files[0]:null;r(l)};return(o,t)=>(d(),c("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Photo",-1)),e("div",Je,[e("label",{for:"file-upload",class:q(["relative flex justify-center items-center w-full h-64 border-2 border-dashed rounded-xl cursor-pointer transition-colors",i.value?"border-orange-500 bg-orange-50":"border-slate-300 hover:border-orange-400"]),onDrop:a,onDragover:y,onDragenter:b,onDragleave:x},[o.image?(d(),c(N,{key:0},[e("img",{src:o.image,alt:"Preview",class:"w-full h-full object-cover rounded-xl"},null,8,Xe),t[1]||(t[1]=e("div",{class:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded-xl"},[e("span",{class:"text-white font-semibold"},"Change Photo")],-1)),e("button",{type:"button",onClick:t[0]||(t[0]=z(l=>o.onImageChange(null),["prevent"])),class:"absolute top-2 right-2 p-1.5 bg-white/80 text-slate-700 rounded-full hover:bg-white hover:scale-110 transition-all"},[m(v(L),{size:18})])],64)):(d(),c("div",Ke,[m(v(he),{size:48,class:"mx-auto text-slate-400"}),t[2]||(t[2]=e("div",{class:"flex text-sm text-slate-600"},[e("span",{class:"font-semibold text-orange-600"},"Click to upload"),e("p",{class:"pl-1"},"or drag and drop")],-1)),t[3]||(t[3]=e("p",{class:"text-xs text-slate-500"},"PNG or JPG (MAX. 5MB)",-1))]))],34),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",onChange:w,accept:"image/png, image/jpeg"},null,32)]),n.value?(d(),c("p",Qe,f(n.value),1)):k("",!0)]))}}),et={class:"flex justify-between items-center p-5 border-b border-slate-200"},tt={class:"text-xl font-semibold text-slate-800"},st={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ot={key:0,class:"text-red-500 text-sm -mt-2"},lt={class:"flex justify-end items-center p-5 border-t border-slate-200 mt-auto bg-slate-50 rounded-b-xl"},nt=M({__name:"SlideFormModal",props:{isOpen:{type:Boolean},onClose:{type:Function},slide:{},category:{}},setup(C){const s=C,{addSlide:i,updateSlide:n}=V(),r=g(""),a=g(1),b=g("active"),x=g(null),y=g(""),w=t=>{x.value=t};ue(()=>[s.slide,s.isOpen],()=>{s.slide?(r.value=s.slide.title,a.value=s.slide.order,b.value=s.slide.status,x.value=s.slide.image):(r.value="",a.value=1,b.value="active",x.value=null),y.value=""});const o=()=>{if(!r.value.trim()||!x.value){y.value="Title and image are required.";return}y.value="";const t={title:r.value,order:Number(a.value),status:b.value,image:x.value,category:s.category};s.slide?n({...s.slide,...t}):i(t),s.onClose()};return(t,l)=>{const P=Ze;return t.isOpen?(d(),c("div",{key:0,class:"fixed inset-0 bg-slate-900/70 z-50 flex justify-center items-center p-4 backdrop-blur-sm",onClick:l[6]||(l[6]=(...p)=>t.onClose&&t.onClose(...p))},[e("div",{class:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:l[5]||(l[5]=z(()=>{},["stop"]))},[e("div",et,[e("h3",tt,f(t.slide?"Update Slide":"Add New Slide"),1),e("button",{onClick:l[0]||(l[0]=(...p)=>t.onClose&&t.onClose(...p)),class:"text-slate-400 hover:text-slate-700 p-1 rounded-full transition-colors"},[m(v(L),{size:24})])]),e("form",{onSubmit:z(o,["prevent"]),class:"p-6 space-y-6 overflow-y-auto"},[m(P,{image:x.value,onImageChange:w},null,8,["image"]),e("div",null,[l[7]||(l[7]=e("label",{for:"title",class:"block text-sm font-medium text-slate-700 mb-1"},"Title",-1)),T(e("input",{id:"title","onUpdate:modelValue":l[1]||(l[1]=p=>r.value=p),type:"text",placeholder:"e.g. Summer Collection",class:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-orange-400 focus:border-orange-500 transition-shadow",required:""},null,512),[[U,r.value]])]),e("div",st,[e("div",null,[l[8]||(l[8]=e("label",{for:"order",class:"block text-sm font-medium text-slate-700 mb-1"},"Order",-1)),T(e("input",{id:"order","onUpdate:modelValue":l[2]||(l[2]=p=>a.value=p),type:"number",min:"1",class:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-orange-400 focus:border-orange-500 transition-shadow",required:""},null,512),[[U,a.value,void 0,{number:!0}]])]),e("div",null,[l[10]||(l[10]=e("label",{for:"status",class:"block text-sm font-medium text-slate-700 mb-1"},"Status",-1)),T(e("select",{id:"status","onUpdate:modelValue":l[3]||(l[3]=p=>b.value=p),class:"w-full px-4 py-2 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-orange-400 focus:border-orange-500 transition-shadow bg-white"},l[9]||(l[9]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[ce,b.value]])])]),y.value?(d(),c("p",ot,f(y.value),1)):k("",!0)],32),e("div",lt,[e("button",{type:"button",onClick:l[4]||(l[4]=(...p)=>t.onClose&&t.onClose(...p)),class:"px-5 py-2.5 bg-white text-slate-700 border border-slate-300 font-semibold rounded-lg hover:bg-slate-100 mr-3 transition-colors"}," Cancel "),e("button",{type:"submit",onClick:o,class:"px-5 py-2.5 bg-orange-500 text-white font-semibold rounded-lg hover:bg-orange-600 transition-colors shadow-sm"},f(t.slide?"Update Slide":"Save Slide"),1)])])])):k("",!0)}}}),at={class:"p-6"},it={class:"sm:flex sm:items-start"},rt={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-orange-100 sm:mx-0 sm:h-10 sm:w-10"},dt={class:"bg-slate-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end gap-3 rounded-b-xl"},ut=M({__name:"AppDeleteModal",props:{isOpen:{type:Boolean},onClose:{type:Function},onConfirm:{type:Function}},setup(C){return(s,i)=>s.isOpen?(d(),c("div",{key:0,class:"fixed inset-0 bg-slate-900/70 z-50 flex justify-center items-center p-4 backdrop-blur-sm",onClick:i[3]||(i[3]=(...n)=>s.onClose&&s.onClose(...n))},[e("div",{class:"bg-white rounded-xl shadow-2xl w-full max-w-md",onClick:i[2]||(i[2]=z(()=>{},["stop"]))},[e("div",at,[e("div",it,[e("div",rt,[m(v(_e),{class:"h-6 w-6 text-orange-500","aria-hidden":"true"})]),i[4]||(i[4]=e("div",{class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},[e("h3",{class:"text-lg font-semibold leading-6 text-slate-900",id:"modal-title"}," Are you sure? "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-slate-500"}," This action will permanently delete your slide. You won't be able to revert this. ")])],-1))])]),e("div",dt,[e("button",{type:"button",class:"w-full sm:w-auto justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-800 shadow-sm hover:bg-slate-100 transition-colors",onClick:i[0]||(i[0]=(...n)=>s.onClose&&s.onClose(...n))}," Cancel "),e("button",{type:"button",class:"w-full sm:w-auto justify-center rounded-lg bg-orange-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-700 transition-colors",onClick:i[1]||(i[1]=(...n)=>s.onConfirm&&s.onConfirm(...n))}," Yes, Delete it ")])])])):k("",!0)}}),ct={class:"min-h-screen bg-slate-50 flex"},pt={class:"flex-1 flex flex-col lg:ml-72 transition-all duration-300"},mt={class:"flex-1 p-4 sm:p-6 lg:p-8"},gt={class:"bg-white p-4 sm:p-6 rounded-xl shadow-lg ring-1 ring-slate-900/5"},vt={class:"flex justify-between items-center pb-4 border-b border-slate-200 mb-6"},bt={key:0},ft={key:1,class:"text-center py-20 border-2 border-dashed border-slate-200 rounded-lg"},xt={class:"fixed top-5 right-5 z-[100] space-y-3 w-11/12 max-w-md"},j=7,_t=M({__name:"slide-manager",async setup(C){let s,i;const{user:n}=ve();n.value||([s,i]=pe(()=>ge("/login")),await s,i());const{getSlidesByCategory:r,deleteSlide:a,notifications:b,removeNotification:x}=V(),y={"mobile-slideshow":"Mobile Slide Show","mobile-advertising":"Mobile Advertising","website-slideshow":"Website Slide Show","website-advertising":"Website Advertising"},w=g("mobile-slideshow"),o=S(()=>r(w.value)),t=g(!1),l=g(!1),P=g(!1),p=g(null),I=g(null),A=g(1),B=S(()=>o.value.length),R=S(()=>Math.ceil(B.value/j)),G=S(()=>o.value.slice((A.value-1)*j,A.value*j)),H=u=>{w.value=u,A.value=1,window.innerWidth<1024&&(t.value=!1)},O=u=>{t.value=u},W=()=>{p.value=null,l.value=!0},Y=u=>{p.value=u,l.value=!0},J=u=>{I.value=u,P.value=!0},X=()=>{I.value&&(a(I.value.id),P.value=!1,I.value=null)},K=u=>{A.value=u},Q=u=>{l.value=u},Z=u=>{P.value=u};return me(()=>{const u=()=>{window.innerWidth>=1024&&(t.value=!1)};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)}),be({title:"Slide Manager - Vireak Buntham",meta:[{name:"description",content:"Manage your slides and advertising content with ease"}]}),(u,h)=>{const ee=ie,te=re,se=Be,oe=Ye,le=de,ne=nt,ae=ut;return d(),c("div",ct,[m(ee,{activeCategory:w.value,onCategoryChange:H,isSidebarOpen:t.value,setIsSidebarOpen:O},null,8,["activeCategory","isSidebarOpen"]),t.value?(d(),c("div",{key:0,class:"fixed inset-0 bg-black/30 z-30 lg:hidden",onClick:h[0]||(h[0]=D=>O(!1)),"aria-hidden":"true"})):k("",!0),e("div",pt,[m(te,{title:y[w.value],onMenuClick:()=>O(!0)},null,8,["title","onMenuClick"]),e("main",mt,[e("div",gt,[e("div",vt,[h[2]||(h[2]=e("h3",{class:"text-lg sm:text-xl font-semibold text-slate-700"},"All Slides",-1)),e("button",{onClick:W,class:"flex items-center bg-orange-500 text-white px-3 sm:px-4 py-2.5 rounded-lg hover:bg-orange-600 transition-colors shadow-sm hover:shadow-md"},[m(v(we),{size:20,class:"sm:mr-2"}),h[1]||(h[1]=e("span",{class:"font-semibold hidden sm:inline"},"Add New",-1))])]),o.value.length>0?(d(),c("div",bt,[m(se,{slides:G.value,onEdit:Y,onDelete:J},null,8,["slides"]),m(oe,{currentPage:A.value,totalPages:R.value,totalItems:B.value,itemsPerPage:j,onPageChange:K},null,8,["currentPage","totalPages","totalItems"])])):(d(),c("div",ft,[m(v(ye),{size:64,class:"mx-auto text-slate-300"}),h[3]||(h[3]=e("h4",{class:"mt-4 text-lg font-semibold text-slate-600"},"No Slides Yet",-1)),h[4]||(h[4]=e("p",{class:"text-slate-400 text-sm mt-1"},'Click "Add New" to create your first slide.',-1))]))])])]),e("div",xt,[(d(!0),c(N,null,E(v(b),D=>(d(),F(le,{key:D.id,message:D.message,type:D.type,onClose:()=>v(x)(D.id)},null,8,["message","type","onClose"]))),128))]),l.value?(d(),F(ne,{key:1,isOpen:l.value,onClose:()=>Q(!1),slide:p.value,category:w.value},null,8,["isOpen","onClose","slide","category"])):k("",!0),P.value&&I.value?(d(),F(ae,{key:2,isOpen:P.value,onClose:()=>Z(!1),onConfirm:X},null,8,["isOpen","onClose"])):k("",!0)])}}});export{_t as default};
